<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Random Image from Google Drive</title>
  <style>
    body { 
      text-align: center; 
      margin-top: 50px; 
      font-family: Arial, sans-serif; 
    }
    img { 
      max-width: 90%; 
      height: auto; 
    }
  </style>
</head>
<body>
  <h1>Random Image</h1>
  <div id="image-container">
    <p>Loading image...</p>
  </div>

  <script>
    // --- Configuration ---
    // Replace with your API key from Google Cloud Console:
    const apiKey = "AIzaSyBH46BPwU62WRdRAqTOZgdCY4YEXRNVlI0";
    // Your Google Drive folder ID:
    const folderId = "1GEe1WLM-q4nlUX5JqbUD20UrqrmwgZ5A";

    // --- Function to list image files in the folder using the Drive API ---
    function listFiles() {
      // Build the query:
      //  - Files whose parent is the folderId.
      //  - MIME type contains 'image/'.
      //  - Exclude trashed files.
      const query = `'${folderId}' in parents and mimeType contains 'image/' and trashed = false`;
      const url = `https://www.googleapis.com/drive/v3/files?q=${encodeURIComponent(query)}&fields=files(id,name)&key=${apiKey}`;

      fetch(url)
        .then(response => response.json())
        .then(data => {
          if (data.files && data.files.length > 0) {
            // Pick a random file:
            const randomIndex = Math.floor(Math.random() * data.files.length);
            const randomFile = data.files[randomIndex];
            displayImage(randomFile.id);
          } else {
            document.getElementById('image-container').innerHTML = "<p>No images found in the folder.</p>";
          }
        })
        .catch(error => {
          console.error('Error fetching files:', error);
          document.getElementById('image-container').innerHTML = "<p>Error fetching images.</p>";
        });
    }

    // --- Function to display the image given a file ID ---
    function displayImage(fileId) {
      // Construct a direct link to the image:
      // The URL format https://drive.google.com/uc?export=view&id=FILE_ID works for embedding.
      const imageUrl = `https://drive.google.com/uc?export=view&id=${fileId}`;
      document.getElementById('image-container').innerHTML = `<img src="${imageUrl}" alt="Random Image">`;
    }

    // --- Run the function on page load ---
    window.onload = listFiles;
  </script>
</body>
</html>
