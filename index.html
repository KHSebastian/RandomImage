<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Random Drive Image</title>
  <style>
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      background: #fafafa;
    }
    #randomImage {
      max-width: 90%;
      max-height: 80vh;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    .loading, .error {
      font-size: 1.2em;
      margin-top: 20px;
    }
    .error { color: red; }
  </style>
</head>
<body>
  <div>
    <img id="randomImage" src="" alt="Random Image" />
    <div id="loadingMessage" class="loading">Loading random image...</div>
    <div id="errorMessage" class="error" style="display:none"></div>
  </div>

  <script>
    // Your deployed web app URL (serving the random image blob)
    const RANDOM_IMAGE_URL = 'https://script.google.com/macros/s/AKfycbz-vhhlYhG9swZS0dkdJLcRtzY4oIr2rUb9Zsj4x3So4GI4zJh23GqS_0RukTCuhO_c/exec';
    
    // Add a cache buster to ensure a fresh image on each load.
    const urlWithCacheBuster = `${RANDOM_IMAGE_URL}?cacheBuster=${Date.now()}`;

    // Set the image src to load the blob directly.
    const img = document.getElementById('randomImage');
    img.onload = function() {
      document.getElementById('loadingMessage').style.display = 'none';
    };
    img.onerror = function() {
      showError('Error loading image.');
    };
    img.src = urlWithCacheBuster;

    function showError(msg) {
      const errDiv = document.getElementById('errorMessage');
      errDiv.textContent = msg;
      errDiv.style.display = 'block';
      document.getElementById('loadingMessage').style.display = 'none';
    }
  </script>
</body>
</html>
